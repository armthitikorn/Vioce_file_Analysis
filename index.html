<!DOCTYPE html>
<html lang="th">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Dashboard à¸«à¸±à¸§à¸«à¸™à¹‰à¸²</title>
Â  Â  <style>
Â  Â  Â  Â  body { font-family: 'Tahoma', sans-serif; background: #f0f2f5; padding: 20px; color: #333; }
Â  Â  Â  Â  .container { max-width: 800px; margin: auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
Â  Â  Â  Â  h1, h2 { text-align: center; color: #004085; }
Â  Â  Â  Â  h3 { color: #0056b3; }
Â  Â  Â  Â  .login-container, .dashboard-container { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
Â  Â  Â  Â  .login-container input, .login-container button { padding: 10px; border-radius: 6px; border: 1px solid #ccc; }
Â  Â  Â  Â  .login-container button { background-color: #007bff; color: white; border: none; cursor: pointer; }
Â  Â  Â  Â  .login-container button:hover { background-color: #0056b3; }
Â  Â  Â  Â  .dashboard-container { display: none; }
Â  Â  Â  Â  .audio-item { border-bottom: 1px solid #e0e0e0; padding: 15px 0; }
Â  Â  Â  Â  .audio-item:last-child { border-bottom: none; }
Â  Â  Â  Â  .error-message { text-align: center; color: red; }
Â  Â  Â  Â  .logout-button { background-color: #dc3545; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; margin-top: 20px; }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <h1>ğŸ“Š Dashboard à¸«à¸±à¸§à¸«à¸™à¹‰à¸²</h1>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="loginSection" class="login-container">
Â  Â  Â  Â  Â  Â  <h2 style="margin-top: 0;">à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š</h2>
Â  Â  Â  Â  Â  Â  <input type="email" id="loginEmail" placeholder="à¸­à¸µà¹€à¸¡à¸¥">
Â  Â  Â  Â  Â  Â  <input type="password" id="loginPassword" placeholder="à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™">
Â  Â  Â  Â  Â  Â  <button id="loginButton">à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š</button>
Â  Â  Â  Â  Â  Â  <p id="loginError" class="error-message"></p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="dashboardSection" class="dashboard-container">
Â  Â  Â  Â  Â  Â  <p id="userStatus" style="text-align: center; color: green;"></p>
Â  Â  Â  Â  Â  Â  <label>à¹€à¸¥à¸·à¸­à¸à¸­à¸µà¹€à¸¡à¸¥à¸à¸™à¸±à¸à¸‡à¸²à¸™:</label>
Â  Â  Â  Â  Â  Â  <select id="emailSelect"></select>

Â  Â  Â  Â  Â  Â  <br>

Â  Â  Â  Â  Â  Â  <label>à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¹ˆà¸‡à¸‡à¸²à¸™:</label>
Â  Â  Â  Â  Â  Â  <select id="dateSelect"></select>
Â  Â  Â  Â  Â  Â  <button onclick="loadAudio()">à¸„à¹‰à¸™à¸«à¸²à¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡</button>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button id="logoutButton" class="logout-button">à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š</button>

Â  Â  Â  Â  Â  Â  <div id="audioContainer" style="margin-top: 20px;"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script type="module">
Â  Â  Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
Â  Â  Â  Â  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
Â  Â  Â  Â  import { getFirestore, collection, getDocs, query, where, Timestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
Â  Â  Â  Â  import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";

Â  Â  Â  Â  // ğŸ”¹ Config Firebase à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹€à¸­à¸‡
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyA4OrZERUoxWPiShCEWVvz1MK9cYGO3_K8",
Â  Â  Â  Â  Â  Â  authDomain: "new-record-3ccd6.firebaseapp.com",
Â  Â  Â  Â  Â  Â  projectId: "new-record-3ccd6",
Â  Â  Â  Â  Â  Â  storageBucket: "new-record-3ccd6.appspot.com",
Â  Â  Â  Â  Â  Â  messagingSenderId: "1065863160189",
Â  Â  Â  Â  Â  Â  appId: "1:1065863160189:web:25313e55b0733f5e126c14"
Â  Â  Â  Â  };

Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = getAuth(app);
Â  Â  Â  Â  const db = getFirestore(app);
Â  Â  Â  Â  const storage = getStorage(app);

Â  Â  Â  Â  const collectionNames = [
Â  Â  Â  Â  Â  Â  "à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‡à¸²à¸™_à¸•à¸­à¸™à¸—à¸µà¹ˆ 1",
Â  Â  Â  Â  Â  Â  "à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‡à¸²à¸™_à¸•à¸­à¸™à¸—à¸µà¹ˆ 2",
Â  Â  Â  Â  Â  Â  "à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‡à¸²à¸™_à¸•à¸­à¸™à¸—à¸µà¹ˆ 3"
Â  Â  Â  Â  ];

Â  Â  Â  Â  // DOM Elements
Â  Â  Â  Â  const loginSection = document.getElementById('loginSection');
Â  Â  Â  Â  const dashboardSection = document.getElementById('dashboardSection');
Â  Â  Â  Â  const loginEmailInput = document.getElementById('loginEmail');
Â  Â  Â  Â  const loginPasswordInput = document.getElementById('loginPassword');
Â  Â  Â  Â  const loginButton = document.getElementById('loginButton');
Â  Â  Â  Â  const loginError = document.getElementById('loginError');
Â  Â  Â  Â  const logoutButton = document.getElementById('logoutButton');
Â  Â  Â  Â  const emailSelect = document.getElementById("emailSelect");
Â  Â  Â  Â  const dateSelect = document.getElementById("dateSelect");
Â  Â  Â  Â  const audioContainer = document.getElementById("audioContainer");
Â  Â  Â  Â  const userStatus = document.getElementById("userStatus");

Â  Â  Â  Â  // ------------------ Authentication ------------------
Â  Â  Â  Â  loginButton.addEventListener('click', async () => {
Â  Â  Â  Â  Â  Â  const email = loginEmailInput.value;
Â  Â  Â  Â  Â  Â  const password = loginPasswordInput.value;
Â  Â  Â  Â  Â  Â  loginError.textContent = '';
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await signInWithEmailAndPassword(auth, email, password);
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  loginError.textContent = "à¸¥à¹‡à¸­à¸à¸­à¸´à¸™à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: " + error.message;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  logoutButton.addEventListener('click', async () => {
Â  Â  Â  Â  Â  Â  await signOut(auth);
Â  Â  Â  Â  });

Â  Â  Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  loginSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  dashboardSection.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  dashboardSection.style.flexDirection = 'column'; // Add this line to fix flex direction
Â  Â  Â  Â  Â  Â  Â  Â  userStatus.textContent = `à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹ƒà¸™à¸à¸²à¸™à¸°: ${user.email}`;
Â  Â  Â  Â  Â  Â  Â  Â  loadEmails();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  loginSection.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  dashboardSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // ------------------ Data Loading Functions ------------------
Â  Â  Â  Â  async function loadEmails() {
Â  Â  Â  Â  Â  Â  emailSelect.innerHTML = '<option value="" disabled selected>-- à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸­à¸µà¹€à¸¡à¸¥ --</option>';
Â  Â  Â  Â  Â  Â  emailSelect.disabled = true;
Â  Â  Â  Â  Â  Â  let emails = new Set();
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // Fetch emails from all collections
Â  Â  Â  Â  Â  Â  Â  Â  for (let col of collectionNames) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const submissionsRef = collection(db, col);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const snapshot = await getDocs(submissionsRef);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const email = doc.data()["à¸­à¸µà¹€à¸¡à¸¥"];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (email) emails.add(email);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (emails.size === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  emailSelect.innerHTML = '<option value="" disabled selected>-- à¹„à¸¡à¹ˆà¸à¸šà¸­à¸µà¹€à¸¡à¸¥ --</option>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '<p class="error-message">à¹„à¸¡à¹ˆà¸à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸µà¹€à¸¡à¸¥</p>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  emailSelect.innerHTML = '<option value="" disabled selected>-- à¹€à¸¥à¸·à¸­à¸à¸­à¸µà¹€à¸¡à¸¥ --</option>';
Â  Â  Â  Â  Â  Â  Â  Â  emails.forEach(email => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const opt = document.createElement("option");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.value = email;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.textContent = email;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  emailSelect.appendChild(opt);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  emailSelect.disabled = false;
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  emailSelect.innerHTML = '<option value="" disabled selected>à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”</option>';
Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '<p class="error-message">à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹‚à¸«à¸¥à¸”à¸­à¸µà¹€à¸¡à¸¥</p>';
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Load emails error:", err);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // **à¹à¸à¹‰à¹„à¸‚à¹‚à¸„à¹‰à¸”à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰**
Â  Â  Â  Â  emailSelect.addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  dateSelect.innerHTML = '<option value="" disabled selected>-- à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ --</option>';
Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  loadDates(emailSelect.value);
Â  Â  Â  Â  });

Â  Â  Â  Â  async function loadDates(email) {
Â  Â  Â  Â  Â  Â  dateSelect.innerHTML = '<option value="" disabled selected>-- à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸§à¸±à¸™à¸—à¸µà¹ˆ --</option>';
Â  Â  Â  Â  Â  Â  dateSelect.disabled = true;
Â  Â  Â  Â  Â  Â  let dates = new Set();
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  for (let col of collectionNames) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const q = query(collection(db, col), where("à¸­à¸µà¹€à¸¡à¸¥", "==", email));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const snapshot = await getDocs(q);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ts = doc.data()["à¸›à¸£à¸°à¸—à¸±à¸šà¹€à¸§à¸¥à¸²"];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (ts instanceof Timestamp) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date(ts.seconds * 1000).toLocaleDateString("th-TH");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dates.add(date);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  dateSelect.innerHTML = '<option value="" disabled selected>-- à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ --</option>';
Â  Â  Â  Â  Â  Â  Â  Â  if (dates.size > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dates.forEach(date => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const opt = document.createElement("option");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.value = date;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.textContent = date;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dateSelect.appendChild(opt);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dateSelect.innerHTML = '<option value="" disabled selected>à¹„à¸¡à¹ˆà¸à¸šà¸§à¸±à¸™à¸—à¸µà¹ˆ</option>';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  dateSelect.disabled = false;
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  dateSelect.innerHTML = '<option value="" disabled selected>à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”</option>';
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Load dates error:", err);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  window.loadAudio = async function() {
Â  Â  Â  Â  Â  Â  const email = emailSelect.value;
Â  Â  Â  Â  Â  Â  const dateStr = dateSelect.value;
Â  Â  Â  Â  Â  Â  if (!email || !dateStr) {
Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '<p class="error-message">à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸­à¸µà¹€à¸¡à¸¥à¹à¸¥à¸°à¸§à¸±à¸™à¸—à¸µà¹ˆà¹ƒà¸«à¹‰à¸„à¸£à¸šà¸–à¹‰à¸§à¸™</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '<p style="text-align: center;">à¸à¸³à¸¥à¸±à¸‡à¸„à¹‰à¸™à¸«à¸²à¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡...</p>';

Â  Â  Â  Â  Â  Â  const [day, month, year] = dateStr.split('/');
Â  Â  Â  Â  Â  Â  const selectedDate = new Date(`${year}-${month}-${day}`);
Â  Â  Â  Â  Â  Â  const startOfDay = Timestamp.fromDate(new Date(selectedDate.setHours(0, 0, 0, 0)));
Â  Â  Â  Â  Â  Â  const endOfDay = Timestamp.fromDate(new Date(selectedDate.setHours(23, 59, 59, 999)));

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  let foundAudios = false;
Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  for (let col of collectionNames) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const q = query(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  collection(db, col),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  where("à¸­à¸µà¹€à¸¡à¸¥", "==", email),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  where("à¸›à¸£à¸°à¸—à¸±à¸šà¹€à¸§à¸¥à¸²", ">=", startOfDay),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  where("à¸›à¸£à¸°à¸—à¸±à¸šà¹€à¸§à¸¥à¸²", "<=", endOfDay)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const snapshot = await getDocs(q);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!snapshot.empty) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  foundAudios = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const section = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  section.innerHTML = `<h3>ğŸ“‚ ${col}</h3>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.appendChild(section);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const audioItems = [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audioItems.push(doc.data());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Sort audio items by question number
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audioItems.sort((a, b) => (a["à¸„à¸³à¸–à¸²à¸¡"] || 0) - (b["à¸„à¸³à¸–à¸²à¸¡"] || 0));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (const data of audioItems) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const folderId = data["à¸¢à¸¹à¹„à¸­à¸”à¸µ"];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const fileName = data["URL à¹€à¸ªà¸µà¸¢à¸‡"];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const filePath = `à¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡/${folderId}/${fileName}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Path à¸—à¸µà¹ˆà¹‚à¸„à¹‰à¸”à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸°à¹ƒà¸Šà¹‰:", filePath);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const audioRef = ref(storage, filePath);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const audioURL = await getDownloadURL(audioRef);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.className = 'audio-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><b>à¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆ ${data["à¸„à¸³à¸–à¸²à¸¡"] || 'N/A'}</b>: ${data["à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡"] || 'à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡'}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <audio controls src="${audioURL}"></audio><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="${audioURL}" download="${fileName}">â¬‡ à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  section.appendChild(card);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`à¹‚à¸«à¸¥à¸”à¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡ ${fileName} à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§:`, err);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorCard = document.createElement("p");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorCard.className = 'error-message';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorCard.textContent = `à¹„à¸¡à¹ˆà¸à¸šà¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆ ${data["à¸„à¸³à¸–à¸²à¸¡"] || 'N/A'}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  section.appendChild(errorCard);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (!foundAudios) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '<p style="text-align: center;">à¹„à¸¡à¹ˆà¸à¸šà¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¸­à¸µà¹€à¸¡à¸¥à¸™à¸µà¹‰à¹ƒà¸™à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸</p>';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²:", err);
Â  Â  Â  Â  Â  Â  Â  Â  audioContainer.innerHTML = '<p class="error-message">à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥</p>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
